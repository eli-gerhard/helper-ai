@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #f8f8fe;
  --foreground: #000000;
  --textbox: #e1e1f2;
  --hover: #c7c7e0;
  --accentyl: #ffcc00;
  --accentrd: #dd0000;
  --accentbl: #0000ff;
  
  /* Default gradient variables */
  /* --gradient-pos-x: 50%;
  --gradient-pos-y: 50%;
  --gradient-angle: 135deg; */
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #222228;
    --foreground: #ffffff;
    --textbox: #2e2e36;
    --hover: #363640;
    /* --accentyl: #ffcc00; */
    /* --accentrd: #dd0000; */
    /* --accentbl: #0000ff; */
  }
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  /* --font-sans: var(--font-geist-sans); */
  /* --font-mono: var(--font-geist-mono); */
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  position: fixed;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

@layer components {
  /* Chat container style */
  .chat-container {
    position: relative;
    overflow: hidden;
    background-color: var(--background);
  }
  
  /* This pseudo-element contains the actual gradient */
  .chat-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    background: linear-gradient(135deg, var(--accentrd) 0%, var(--accentbl) 100%);
    opacity: 0; /* The gradient is invisible except through border cutouts */
    z-index: -1;
  }

  /* Gradient message styles */
  .gradient-message {
    position: relative;
    padding: 12px 16px;
    border-radius: 16px;
    margin-bottom: 8px;
    max-width: 80%;
    
    /* Transparent border creates spacing for gradient to show through */
    border: 2px solid transparent;
    
    /* Background only covers content area, not border */
    background-clip: padding-box;
    background-color: #222228;
    color: #ffffff;
  }
  
  /* Create the gradient border effect using pseudo-element */
  .gradient-message::before {
    content: "";
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    border-radius: inherit;
    
    /* This creates a "cutout" where the content is */
    mask: 
      linear-gradient(#fff 0 0) content-box, 
      linear-gradient(#fff 0 0);
    mask-composite: exclude;
    -webkit-mask-composite: destination-out;
    
    /* The gradient for the border */
    background: linear-gradient(135deg, var(--accentrd) 0%, var(--accentbl) 100%);
    z-index: -1;
  }
  
  /* Message positioning */
  .user-message {
    @apply self-end bg-[var(--background)] text-[var(--foreground)] px-2 py-1 rounded-lg;
  }
  
  .assistant-message {
    @apply self-start bg-[var(--background)] text-[var(--foreground)] px-2 py-1 rounded-lg;
  }
  
  .thinking {
    @apply self-start bg-transparent text-[var(--foreground)] italic p-2;
  }
  
  .error {
    @apply text-[var(--accentrd)] p-2 mt-2.5 rounded bg-red-100 border border-red-200;
  }
  
  /* Code block styling */
  pre {
    @apply bg-[var(--background)] text-[var(--foreground)] p-2 rounded overflow-x-auto font-mono text-sm my-2.5;
  }
  
  code {
    @apply font-mono;
  }
  
  /* Sidebar transition */
  .sidebar-transition {
    @apply transition-all duration-300 ease-in-out;
  }
  
  /* Mobile responsive adjustments */
  @media (max-width: 640px) {
    .user-message, .assistant-message {
      @apply max-w-[90%];
    }

    /* Ensure the app takes full height on mobile */
    html, body {
      @apply h-full overflow-hidden;
    }
  }
}